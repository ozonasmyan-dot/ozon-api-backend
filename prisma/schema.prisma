generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "sqlite"
  url      = env("DATABASE_URL")
}

model AdvertisingStat {
  id           String   @id @default(uuid())
  campaignId   String
  productId    String
  type         String
  moneySpent   Float
  views        Int
  clicks       Int
  toCart       Int
  ctr          Float
  weeklyBudget Int
  status       String
  avgBid       Float
  crToCart     Float
  costPerCart  Float
  savedAt      DateTime
}

model Advertising {
  id           String   @id @default(uuid())
  campaignId   String
  productId    String
  type         String
  moneySpent   Float
  views        Int
  clicks       Int
  toCart       Int
  ctr          Float
  weeklyBudget Int
  status       String
  avgBid       Float
  crToCart     Float
  costPerCart  Float
  savedAt      DateTime

  @@unique([savedAt, campaignId, productId])
}

model UnitNew {
  id                   String    @id @default(cuid())
  product              String
  orderId              String
  orderNumber          String
  postingNumber        String
  statusOzon           String
  createdAt            DateTime
  inProcessAt          DateTime
  deliveryType         String
  city                 String?
  isPremium            Boolean
  paymentTypeGroupName String
  warehouseId          String
  warehouseName        String
  sku                  String
  oldPrice             Int // в копейках
  price                Int // в копейках
  currencyCode         String
  clusterFrom          String
  clusterTo            String
  status               String
  margin               Int // в копейках
  costPrice            Int // в копейках
  totalServices        Int // в копейках
  services             Json
  lastOperationDate    DateTime?

  @@unique([postingNumber])
}

model Transaction {
  id                String   @id @default(cuid())
  operationId       Int      @unique
  operationType     String
  operationDate     DateTime
  operationTypeName String
  deliveryCharge        Float
  returnDeliveryCharge  Float
  accrualsForSale       Float
  saleCommission        Float
  amount            Float
  type              String
  postingNumber     String?
  items             Json
  services          Json
}

